From: Jochen Sprickerhof <jspricke@debian.org>
Date: Mon, 20 Apr 2020 19:17:54 +0200
Subject: Use system tinyobjloader

---
 cmake/SearchForStuff.cmake   |  4 ++++
 gazebo/common/CMakeLists.txt |  1 +
 gazebo/common/OBJLoader.cc   | 11 ++++++++---
 3 files changed, 13 insertions(+), 3 deletions(-)

--- a/cmake/SearchForStuff.cmake
+++ b/cmake/SearchForStuff.cmake
@@ -621,6 +621,10 @@
 find_package(Qt5 COMPONENTS Core Widgets OpenGL Test REQUIRED)
 
 ########################################
+# Find tinyobjloader
+find_package(tinyobjloader REQUIRED)
+
+########################################
 # Find Boost, if not specified manually
 include(FindBoost)
 find_package(Boost ${MIN_BOOST_VERSION} REQUIRED thread system filesystem program_options regex iostreams date_time)
--- a/gazebo/common/CMakeLists.txt
+++ b/gazebo/common/CMakeLists.txt
@@ -255,6 +255,7 @@
     ${libavdevice_LIBRARIES}
     ${libswscale_LIBRARIES}
     ${TBB_LIBRARIES}
+    tinyobjloader::tinyobjloader
 )
 
 if (UNIX)
--- a/gazebo/common/OBJLoader.cc
+++ b/gazebo/common/OBJLoader.cc
@@ -24,8 +24,7 @@
 #include "gazebo/common/Mesh.hh"
 #include "gazebo/common/OBJLoader.hh"
 
-#define GAZEBO_TINYOBJLOADER_IMPLEMENTATION
-#include "tiny_obj_loader.h"
+#include <tiny_obj_loader.h>
 
 namespace gazebo
 {
